mainBuild:
  name: customBuild.exceptions.js
  bindings:
    - symbol: BRepPrimAPI_MakeCone
    - symbol: BRepPrimAPI_MakeOneAxis
    - symbol: BRepBuilderAPI_MakeShape
    - symbol: BRepBuilderAPI_Command
    - symbol: Standard_Failure
    - symbol: Standard_Transient
  additionalBindCode: |
    #include <emscripten/bind.h>
    #include <emscripten/val.h>
    #include <iostream>
    #include <typeinfo>

    #include "Standard_Failure.hxx"

    using namespace emscripten;

    class OCJSExceptionTools {
    public:
      static val getStandard_FailureData(intptr_t exceptionPtr) {
        return val(*reinterpret_cast<Standard_Failure*>(exceptionPtr));
      }
    };

    EMSCRIPTEN_BINDINGS(OCJSExceptionTools) {
      class_<OCJSExceptionTools>("OCJSExceptionTools")
        .class_function("getStandard_FailureData", &OCJSExceptionTools::getStandard_FailureData)
      ;
    }
